(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=d.slice,g=d.unshift,h=e.toString,i=e.hasOwnProperty,j=d.forEach,k=d.map,l=d.reduce,m=d.reduceRight,n=d.filter,o=d.every,p=d.some,q=d.indexOf,r=d.lastIndexOf;e=Array.isArray;var s=Object.keys,t=Function.prototype.bind,u=function(a){return new z(a)};typeof module!="undefined"&&module.exports?(module.exports=u,u._=u):a._=u,u.VERSION="1.1.6";var v=u.each=u.forEach=function(a,b,d){if(a!=null)if(j&&a.forEach===j)a.forEach(b,d);else if(u.isNumber(a.length)){for(var e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===c)break}else for(e in a)if(i.call(a,e)&&b.call(d,a[e],e,a)===c)break};u.map=function(a,b,c){var d=[];return a==null?d:k&&a.map===k?a.map(b,c):(v(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},u.reduce=u.foldl=u.inject=function(a,b,c,d){var e=c!==void 0;a==null&&(a=[]);if(l&&a.reduce===l)return d&&(b=u.bind(b,d)),e?a.reduce(b,c):a.reduce(b);v(a,function(a,f,g){!e&&f===0?(c=a,e=!0):c=b.call(d,c,a,f,g)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},u.reduceRight=u.foldr=function(a,b,c,d){return a==null&&(a=[]),m&&a.reduceRight===m?(d&&(b=u.bind(b,d)),c!==void 0?a.reduceRight(b,c):a.reduceRight(b)):(a=(u.isArray(a)?a.slice():u.toArray(a)).reverse(),u.reduce(a,b,c,d))},u.find=u.detect=function(a,b,c){var d;return w(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},u.filter=u.select=function(a,b,c){var d=[];return a==null?d:n&&a.filter===n?a.filter(b,c):(v(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},u.reject=function(a,b,c){var d=[];return a==null?d:(v(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},u.every=u.all=function(a,b,d){var e=!0;return a==null?e:o&&a.every===o?a.every(b,d):(v(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var w=u.some=u.any=function(a,b,d){b||(b=u.identity);var e=!1;return a==null?e:p&&a.some===p?a.some(b,d):(v(a,function(a,f,g){if(e=b.call(d,a,f,g))return c}),e)};u.include=u.contains=function(a,b){var c=!1;return a==null?c:q&&a.indexOf===q?a.indexOf(b)!=-1:(w(a,function(a){if(c=a===b)return!0}),c)},u.invoke=function(a,b){var c=f.call(arguments,2);return u.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})},u.pluck=function(a,b){return u.map(a,function(a){return a[b]})},u.max=function(a,b,c){if(!b&&u.isArray(a))return Math.max.apply(Math,a);var d={computed:-Infinity};return v(a,function(a,e,f){e=b?b.call(c,a,e,f):a,e>=d.computed&&(d={value:a,computed:e})}),d.value},u.min=function(a,b,c){if(!b&&u.isArray(a))return Math.min.apply(Math,a);var d={computed:Infinity};return v(a,function(a,e,f){e=b?b.call(c,a,e,f):a,e<d.computed&&(d={value:a,computed:e})}),d.value},u.sortBy=function(a,b,c){return u.pluck(u.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},u.sortedIndex=function(a,b,c){c||(c=u.identity);for(var d=0,e=a.length;d<e;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},u.toArray=function(a){return a?a.toArray?a.toArray():u.isArray(a)?a:u.isArguments(a)?f.call(a):u.values(a):[]},u.size=function(a){return u.toArray(a).length},u.first=u.head=function(a,b,c){return b!=null&&!c?f.call(a,0,b):a[0]},u.rest=u.tail=function(a,b,c){return f.call(a,b==null||c?1:b)},u.last=function(a){return a[a.length-1]},u.compact=function(a){return u.filter(a,function(a){return!!a})},u.flatten=function(a){return u.reduce(a,function(a,b){return u.isArray(b)?a.concat(u.flatten(b)):(a[a.length]=b,a)},[])},u.without=function(a){var b=f.call(arguments,1);return u.filter(a,function(a){return!u.include(b,a)})},u.uniq=u.unique=function(a,b){return u.reduce(a,function(a,c,d){if(0==d||(b===!0?u.last(a)!=c:!u.include(a,c)))a[a.length]=c;return a},[])},u.intersect=function(a){var b=f.call(arguments,1);return u.filter(u.uniq(a),function(a){return u.every(b,function(b){return u.indexOf(b,a)>=0})})},u.zip=function(){for(var a=f.call(arguments),b=u.max(u.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=u.pluck(a,""+d);return c},u.indexOf=function(a,b,c){if(a==null)return-1;var d;if(c)return c=u.sortedIndex(a,b),a[c]===b?c:-1;if(q&&a.indexOf===q)return a.indexOf(b);c=0;for(d=a.length;c<d;c++)if(a[c]===b)return c;return-1},u.lastIndexOf=function(a,b){if(a==null)return-1;if(r&&a.lastIndexOf===r)return a.lastIndexOf(b);for(var c=a.length;c--;)if(a[c]===b)return c;return-1},u.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f},u.bind=function(a,b){if(a.bind===t&&t)return t.apply(a,f.call(arguments,1));var c=f.call(arguments,2);return function(){return a.apply(b,c.concat(f.call(arguments)))}},u.bindAll=function(a){var b=f.call(arguments,1);return b.length==0&&(b=u.functions(a)),v(b,function(b){a[b]=u.bind(a[b],a)}),a},u.memoize=function(a,b){var c={};return b||(b=u.identity),function(){var d=b.apply(this,arguments);return i.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},u.delay=function(a,b){var c=f.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},u.defer=function(a){return u.delay.apply(u,[a,1].concat(f.call(arguments,1)))};var x=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d);if(c||!d)d=setTimeout(g,b)}};u.throttle=function(a,b){return x(a,b,!1)},u.debounce=function(a,b){return x(a,b,!0)},u.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},u.wrap=function(a,b){return function(){var c=[a].concat(f.call(arguments));return b.apply(this,c)}},u.compose=function(){var a=f.call(arguments);return function(){for(var b=f.call(arguments),c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},u.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},u.keys=s||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)i.call(a,c)&&(b[b.length]=c);return b},u.values=function(a){return u.map(a,u.identity)},u.functions=u.methods=function(a){return u.filter(u.keys(a),function(b){return u.isFunction(a[b])}).sort()},u.extend=function(a){return v(f.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])}),a},u.defaults=function(a){return v(f.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},u.clone=function(a){return u.isArray(a)?a.slice():u.extend({},a)},u.tap=function(a,b){return b(a),a},u.isEqual=function(a,b){if(a===b)return!0;var c=typeof a;if(c!=typeof b)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual)return a.isEqual(b);if(u.isDate(a)&&u.isDate(b))return a.getTime()===b.getTime();if(u.isNaN(a)&&u.isNaN(b))return!1;if(u.isRegExp(a)&&u.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(c!=="object")return!1;if(a.length&&a.length!==b.length)return!1;c=u.keys(a);var d=u.keys(b);if(c.length!=d.length)return!1;for(var e in a)if(!(e in b)||!u.isEqual(a[e],b[e]))return!1;return!0},u.isEmpty=function(a){if(u.isArray(a)||u.isString(a))return a.length===0;for(var b in a)if(i.call(a,b))return!1;return!0},u.isElement=function(a){return!!a&&a.nodeType==1},u.isArray=e||function(a){return h.call(a)==="[object Array]"},u.isArguments=function(a){return!!a&&!!i.call(a,"callee")},u.isFunction=function(a){return!(!a||!a.constructor||!a.call||!a.apply)},u.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)},u.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)},u.isNaN=function(a){return a!==a},u.isBoolean=function(a){return a===!0||a===!1},u.isDate=function(a){return!(!a||!a.getTimezoneOffset||!a.setUTCFullYear)},u.isRegExp=function(a){return!(!a||!a.test||!a.exec||!a.ignoreCase&&a.ignoreCase!==!1)},u.isNull=function(a){return a===null},u.isUndefined=function(a){return a===void 0},u.noConflict=function(){return a._=b,this},u.identity=function(a){return a},u.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},u.mixin=function(a){v(u.functions(a),function(b){B(b,u[b]=a[b])})};var y=0;u.uniqueId=function(a){var b=y++;return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},u.template=function(a,b){var c=u.templateSettings;return c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",c=new Function("obj",c),b?c(b):c};var z=function(a){this._wrapped=a};u.prototype=z.prototype;var A=function(a,b){return b?u(a).chain():a},B=function(a,b){z.prototype[a]=function(){var a=f.call(arguments);return g.call(a,this._wrapped),A(b.apply(u,a),this._chain)}};u.mixin(u),v(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];z.prototype[a]=function(){return b.apply(this._wrapped,arguments),A(this._wrapped,this._chain)}}),v(["concat","join","slice"],function(a){var b=d[a];z.prototype[a]=function(){return A(b.apply(this._wrapped,arguments),this._chain)}}),z.prototype.chain=function(){return this._chain=!0,this},z.prototype.value=function(){return this._wrapped}})(),function(){var a=this,b=a.Backbone,c;c=typeof exports!="undefined"?exports:a.Backbone={},c.VERSION="0.5.3";var d=a._;!d&&typeof require!="undefined"&&(d=require("underscore")._);var e=a.jQuery||a.Zepto;c.noConflict=function(){return a.Backbone=b,this},c.emulateHTTP=!1,c.emulateJSON=!1,c.Events={bind:function(a,b,c){var d=this._callbacks||(this._callbacks={});return(d[a]||(d[a]=[])).push([b,c]),this},unbind:function(a,b){var c;if(a){if(c=this._callbacks)if(b){c=c[a];if(!c)return this;for(var d=0,e=c.length;d<e;d++)if(c[d]&&b===c[d][0]){c[d]=null;break}}else c[a]=[]}else this._callbacks={};return this},trigger:function(a){var b,c,d,e,f=2;if(!(c=this._callbacks))return this;for(;f--;)if(b=f?a:"all",b=c[b])for(var g=0,h=b.length;g<h;g++)(d=b[g])?(e=f?Array.prototype.slice.call(arguments,1):arguments,d[0].apply(d[1]||this,e)):(b.splice(g,1),g--,h--);return this}},c.Model=function(a,b){var c;a||(a={});if(c=this.defaults)d.isFunction(c)&&(c=c.call(this)),a=d.extend({},c,a);this.attributes={},this._escapedAttributes={},this.cid=d.uniqueId("c"),this.set(a,{silent:!0}),this._changed=!1,this._previousAttributes=d.clone(this.attributes),b&&b.collection&&(this.collection=b.collection),this.initialize(a,b)},d.extend(c.Model.prototype,c.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return d.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;return(b=this._escapedAttributes[a])?b:(b=this.attributes[a],this._escapedAttributes[a]=(b==null?"":""+b).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"))},has:function(a){return this.attributes[a]!=null},set:function(a,b){b||(b={});if(!a)return this;a.attributes&&(a=a.attributes);var c=this.attributes,e=this._escapedAttributes;if(!b.silent&&this.validate&&!this._performValidation(a,b))return!1;this.idAttribute in a&&(this.id=a[this.idAttribute]);var f=this._changing;this._changing=!0;for(var g in a){var h=a[g];d.isEqual(c[g],h)||(c[g]=h,delete e[g],this._changed=!0,b.silent||this.trigger("change:"+g,this,h,b))}return!f&&!b.silent&&this._changed&&this.change(b),this._changing=!1,this},unset:function(a,b){if(a in this.attributes){b||(b={});var c={};return c[a]=void 0,!b.silent&&this.validate&&!this._performValidation(c,b)?!1:(delete this.attributes[a],delete this._escapedAttributes[a],a==this.idAttribute&&delete this.id,this._changed=!0,b.silent||(this.trigger("change:"+a,this,void 0,b),this.change(b)),this)}return this},clear:function(a){a||(a={});var b,c=this.attributes,d={};for(b in c)d[b]=void 0;if(!a.silent&&this.validate&&!this._performValidation(d,a))return!1;this.attributes={},this._escapedAttributes={},this._changed=!0;if(!a.silent){for(b in c)this.trigger("change:"+b,this,void 0,a);this.change(a)}return this},fetch:function(a){a||(a={});var b=this,d=a.success;return a.success=function(c,e,f){if(!b.set(b.parse(c,f),a))return!1;d&&d(b,c)},a.error=s(a.error,b,a),(this.sync||c.sync).call(this,"read",this,a)},save:function(a,b){b||(b={});if(a&&!this.set(a,b))return!1;var d=this,e=b.success;b.success=function(a,c,f){if(!d.set(d.parse(a,f),b))return!1;e&&e(d,a,f)},b.error=s(b.error,d,b);var f=this.isNew()?"create":"update";return(this.sync||c.sync).call(this,f,this,b)},destroy:function(a){a||(a={});if(this.isNew())return this.trigger("destroy",this,this.collection,a);var b=this,d=a.success;return a.success=function(c){b.trigger("destroy",b,b.collection,a),d&&d(b,c)},a.error=s(a.error,b,a),(this.sync||c.sync).call(this,"delete",this,a)},url:function(){var a=q(this.collection)||this.urlRoot||r();return this.isNew()?a:a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(a){this.trigger("change",this,a),this._previousAttributes=d.clone(this.attributes),this._changed=!1},hasChanged:function(a){return a?this._previousAttributes[a]!=this.attributes[a]:this._changed},changedAttributes:function(a){a||(a=this.attributes);var b=this._previousAttributes,c=!1,e;for(e in a)d.isEqual(b[e],a[e])||(c=c||{},c[e]=a[e]);return c},previous:function(a){return!a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return d.clone(this._previousAttributes)},_performValidation:function(a,b){var c=this.validate(a);return c?(b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}}),c.Collection=function(a,b){b||(b={}),b.comparator&&(this.comparator=b.comparator),d.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),a&&this.reset(a,{silent:!0}),this.initialize.apply(this,arguments)},d.extend(c.Collection.prototype,c.Events,{model:c.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)this._add(a[c],b);else this._add(a,b);return this},remove:function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)this._remove(a[c],b);else this._remove(a,b);return this},get:function(a){return a==null?null:this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return d.map(this.models,function(b){return b.get(a)})},reset:function(a,b){return a||(a=[]),b||(b={}),this.each(this._removeReference),this._reset(),this.add(a,{silent:!0}),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a||(a={});var b=this,d=a.success;return a.success=function(c,e,f){b[a.add?"add":"reset"](b.parse(c,f),a),d&&d(b,c)},a.error=s(a.error,b,a),(this.sync||c.sync).call(this,"read",this,a)},create:function(a,b){var c=this;b||(b={}),a=this._prepareModel(a,b);if(!a)return!1;var d=b.success;return b.success=function(a,e,f){c.add(a,b),d&&d(a,e,f)},a.save(null,b),a},parse:function(a){return a},chain:function(){return d(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){if(a instanceof c.Model)a.collection||(a.collection=this);else{var d=a;a=new this.model(d,{collection:this}),a.validate&&!a._performValidation(d,b)&&(a=!1)}return a},_add:function(a,b){b||(b={}),a=this._prepareModel(a,b);if(!a)return!1;var c=this.getByCid(a);if(c)throw Error(["Can't add the same model to a set twice",c.id]);return this._byId[a.id]=a,this._byCid[a.cid]=a,this.models.splice(b.at!=null?b.at:this.comparator?this.sortedIndex(a,this.comparator):this.length,0,a),a.bind("all",this._onModelEvent),this.length++,b.silent||a.trigger("add",a,this,b),a},_remove:function(a,b){return b||(b={}),a=this.getByCid(a)||this.get(a),a?(delete this._byId[a.id],delete this._byCid[a.cid],this.models.splice(this.indexOf(a),1),this.length--,b.silent||a.trigger("remove",a,this,b),this._removeReference(a),a):null},_removeReference:function(a){this==a.collection&&delete a.collection,a.unbind("all",this._onModelEvent)},_onModelEvent:function(a,b,c,d){(a=="add"||a=="remove")&&c!=this||(a=="destroy"&&this._remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments))}}),d.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"],function(a){c.Collection.prototype[a]=function(){return d[a].apply(d,[this.models].concat(d.toArray(arguments)))}}),c.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var f=/:([\w\d]+)/g,g=/\*([\w\d]+)/g,h=/[-[\]{}()+?.,\\^$|#\s]/g;d.extend(c.Router.prototype,c.Events,{initialize:function(){},route:function(a,b,e){c.history||(c.history=new c.History),d.isRegExp(a)||(a=this._routeToRegExp(a)),c.history.route(a,d.bind(function(c){c=this._extractParameters(a,c),e.apply(this,c),this.trigger.apply(this,["route:"+b].concat(c))},this))},navigate:function(a,b){c.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){return a=a.replace(h,"\\$&").replace(f,"([^/]*)").replace(g,"(.*?)"),RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}}),c.History=function(){this.handlers=[],d.bindAll(this,"checkUrl")};var i=/^#*/,j=/msie [\w.]+/,k=!1;d.extend(c.History.prototype,{interval:50,getFragment:function(a,b){if(a==null)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c),a.indexOf(this.options.root)==0&&(a=a.substr(this.options.root.length))}else a=window.location.hash;return decodeURIComponent(a.replace(i,""))},start:function(a){if(k)throw Error("Backbone.history has already been started");this.options=d.extend({},{root:"/"},this.options,a),this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState),a=this.getFragment();var b=document.documentMode;if(b=j.exec(navigator.userAgent.toLowerCase())&&(!b||b<=7))this.iframe=e('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?e(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!b?e(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=a,k=!0,a=window.location,b=a.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=a.hash.replace(i,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.iframe.location.hash));if(a==this.fragment||a==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(a),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return d.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){var c=(a||"").replace(i,"");if(this.fragment!=c&&this.fragment!=decodeURIComponent(c)){if(this._hasPushState){var d=window.location;c.indexOf(this.options.root)!=0&&(c=this.options.root+c),this.fragment=c,window.history.pushState({},document.title,d.protocol+"//"+d.host+c)}else if(window.location.hash=this.fragment=c,this.iframe&&c!=this.getFragment(this.iframe.location.hash))this.iframe.document.open().close(),this.iframe.location.hash=c;b&&this.loadUrl(a)}}}),c.View=function(a){this.cid=d.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var l=/^(\S+)\s*(.*)$/,m=["model","collection","el","id","attributes","className","tagName"];d.extend(c.View.prototype,c.Events,{tagName:"div",$:function(a){return e(a,this.el)},initialize:function(){},render:function(){return this},remove:function(){return e(this.el).remove(),this},make:function(a,b,c){return a=document.createElement(a),b&&e(a).attr(b),c&&e(a).html(c),a},delegateEvents:function(a){if(a||(a=this.events))for(var b in d.isFunction(a)&&(a=a.call(this)),e(this.el).unbind(".delegateEvents"+this.cid),a){var c=this[a[b]];if(!c)throw Error('Event "'+a[b]+'" does not exist');var f=b.match(l),g=f[1];f=f[2],c=d.bind(c,this),g+=".delegateEvents"+this.cid,f===""?e(this.el).bind(g,c):e(this.el).delegate(f,g,c)}},_configure:function(a){this.options&&(a=d.extend({},this.options,a));for(var b=0,c=m.length;b<c;b++){var e=m[b];a[e]&&(this[e]=a[e])}this.options=a},_ensureElement:function(){if(this.el)d.isString(this.el)&&(this.el=e(this.el).get(0));else{var a=this.attributes||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.el=this.make(this.tagName,a)}}}),c.Model.extend=c.Collection.extend=c.Router.extend=c.View.extend=function(a,b){var c=p(this,a,b);return c.extend=this.extend,c};var n={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};c.sync=function(a,b,f){var g=n[a];return f=d.extend({type:g,dataType:"json"},f),f.url||(f.url=q(b)||r()),!f.data&&b&&(a=="create"||a=="update")&&(f.contentType="application/json",f.data=JSON.stringify(b.toJSON())),c.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),c.emulateHTTP&&(g==="PUT"||g==="DELETE")&&(c.emulateJSON&&(f.data._method=g),f.type="POST",f.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g)}),f.type!=="GET"&&!c.emulateJSON&&(f.processData=!1),e.ajax(f)};var o=function(){},p=function(a,b,c){var e;return e=b&&b.hasOwnProperty("constructor")?b.constructor:function(){return a.apply(this,arguments)},d.extend(e,a),o.prototype=a.prototype,e.prototype=new o,b&&d.extend(e.prototype,b),c&&d.extend(e,c),e.prototype.constructor=e,e.__super__=a.prototype,e},q=function(a){return!a||!a.url?null:d.isFunction(a.url)?a.url():a.url},r=function(){throw Error('A "url" property or function must be specified')},s=function(a,b,c){return function(d){a?a(b,d,c):b.trigger("error",b,d,c)}}}.call(this);var home=Backbone.View.extend({events:{"click  #screenLeftA":"screenLeftA","click  #screenRightA":"screenRightA","click  #btnHome":"btnHome","click  #SearchInfoClickA":"formSearchInfo","submit #formSearchInfo":"formSearchInfo"},initialize:function(){_.bindAll(this,"render","appContent","widthAuto","dangerInfo","safeInfo","remove","formSearchInfo")},render:function(){$("#header").html(Templates.header),$("#footer").html(Templates.footer);var a=this},appContent:function(a){$("#header").after(Templates.home),$(".content").animate({"margin-top":"90px"},"slow")},remove:function(a){$("body").children(a).remove()},appContentDanger:function(a){function d(){var a=$(".content-box-info-screen");c+=1,a.css({height:c,overflow:"hidden"}),b=setTimeout(d,5),c>=180&&(clearTimeout(b),$(".content-search-input").attr("disabled",!1),$(".content-search-a").attr("id","SearchInfoClickA"))}$(".content").after(Templates.danger),$(".loading").remove(),$(".content-search-a").text("GO >");var b,c=0;d();var e=this;$(window).width(function(a){e.widthAuto()}).on("resize",function(){e.widthAuto()})},screenLeftA:function(a){a.preventDefault(),app.router.navigate("",!0)},screenRightA:function(a){a.preventDefault(),app.router.navigate("",!0)},widthAuto:function(){var a=$("#timeLineUl li").length,b=0,c=$(window).width(),d=$("#timeLine").width(),e=0,f=640*c/1302;c<=500&&(f+=100);var g=280*c/1302,h=292*c/1302,i=707*c/1302,j=f*a,k=128*c/1302;if(c<=500)var k=f/5;var l=0,m=0;a%2==0?(b=a/2,e=1,l=-k*a/2+e*k+k*2,m=-f*a/2+e*f):(b=(a+1)/2,l=-k*(a-1)/2+k*2,m=-f*(a-1)/2),$(".content-box-info-screen-box-timeline-line-li").css({width:k}),$("#timeLineHiddle").css({width:f}),$("#timeLine").css({width:f}),$("#timeLineColor").css({width:f}),$("#timeLineUl").css({width:k*a+1}),$("#promptBox").css({width:f}),$("#promptUlWidth").css({width:j+1}),$(".content-box-info-screen-box-prompt-ul-li").css({width:f}),$("#screenRight").css({width:g,right:h,"background-size":g}),$("#screenLeft").css({width:g,right:i,"background-size":g}),$("#screenRightA").css({right:h-25}),$("#screenLeftA").css({right:i+g+25}),$("#timeLineUl").css({"margin-left":l}),$("#promptUlWidth").css({"margin-left":m}),c<=500&&($("#screenRightA").css({right:"5px"}),$("#screenLeftA").css({left:"5px"})),a==2?($("#timeLineUl").find("li").css({opacity:"0.1"}),$("#timeLineUl").find("li:eq("+b+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b-1)+")").css({opacity:"1"})):a==3?($("#timeLineUl").find("li").css({opacity:"0.1"}),$("#timeLineUl").find("li:eq("+(b-2)+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b-1)+")").css({opacity:"1"}),$("#timeLineUl").find("li:eq("+(b-3)+")").css({opacity:"0.3"}),$("#timeLineUl").find("li:eq("+b+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b+1)+")").css({opacity:"0.3"})):a>2&&($("#timeLineUl").find("li").css({opacity:"0.1"}),$("#timeLineUl").find("li:eq("+(b-2)+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+b+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b-1)+")").css({opacity:"1"}),$("#timeLineUl").find("li:eq("+(b-3)+")").css({opacity:"0.3"}),$("#timeLineUl").find("li:eq("+(b+1)+")").css({opacity:"0.3"})),$("#screenLeftA").bind({click:function(){if(b<=1)return!1;b-=1,a==2?($("#timeLineUl").find("li").css({opacity:"0.1"}),$("#timeLineUl").find("li:eq("+b+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b-1)+")").css({opacity:"1"})):a==3?($("#timeLineUl").find("li").css({opacity:"0.1"}),$("#timeLineUl").find("li:eq("+(b-2)+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b-1)+")").css({opacity:"1"}),$("#timeLineUl").find("li:eq("+(b-3)+")").css({opacity:"0.3"}),$("#timeLineUl").find("li:eq("+b+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b+1)+")").css({opacity:"0.3"})):a>2&&($("#timeLineUl").find("li").css({opacity:"0.1"}),$("#timeLineUl").find("li:eq("+(b-2)+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+b+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b-1)+")").css({opacity:"1"}),$("#timeLineUl").find("li:eq("+(b-3)+")").css({opacity:"0.3"}),$("#timeLineUl").find("li:eq("+(b+1)+")").css({opacity:"0.3"})),l+=k,m+=f,$("#timeLineUl").animate({marginLeft:l},{queue:!1,duration:500}),$("#promptUlWidth").animate({marginLeft:m},{queue:!1,duration:500})}}),$("#screenRightA").bind({click:function(){if(b>=a)return!1;b+=1,a==2?($("#timeLineUl").find("li").css({opacity:"0.1"}),$("#timeLineUl").find("li:eq("+(b-2)+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b-1)+")").css({opacity:"1"})):a==3?($("#timeLineUl").find("li").css({opacity:"0.1"}),$("#timeLineUl").find("li:eq("+(b-2)+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b-1)+")").css({opacity:"1"}),$("#timeLineUl").find("li:eq("+(b-3)+")").css({opacity:"0.3"}),$("#timeLineUl").find("li:eq("+b+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b+1)+")").css({opacity:"0.3"})):a>2&&($("#timeLineUl").find("li").css({opacity:"0.1"}),$("#timeLineUl").find("li:eq("+(b-2)+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+b+")").css({opacity:"0.7"}),$("#timeLineUl").find("li:eq("+(b-1)+")").css({opacity:"1"}),$("#timeLineUl").find("li:eq("+(b-3)+")").css({opacity:"0.3"}),$("#timeLineUl").find("li:eq("+(b+1)+")").css({opacity:"0.3"})),l-=k,m-=f,$("#timeLineUl").animate({marginLeft:l},{queue:!1,duration:500}),$("#promptUlWidth").animate({marginLeft:m},{queue:!1,duration:500})}})},dangerInfo:function(a){var b=this,c=$("#timeLineUl"),d=$("#promptUlWidth");c.text(""),d.text(""),a.sort(function(a,b){return a.leakTime<b.leakTime?-1:a.leakTime>b.leakTime?1:0});for(var e=0;e<a.length;e++)c.append('<li class="content-box-info-screen-box-timeline-line-li"><a href="javascript:void(0)">'+a[e].leakTime+'</a><div class="content-box-info-screen-box-timeline-line-light"></div></li>'),d.append('<li class="content-box-info-screen-box-prompt-ul-li"><p class="content-box-info-screen-box-prompt-title">'+a[e].des+'</p><p class="content-box-info-screen-box-prompt-info">(本次泄露共有'+a[e].counts+"条数据)</p></li>");this.widthAuto()},safeInfo:function(){function c(){var d=$(".content-box-info-screen");b+=1,d.css({height:b,overflow:"hidden"}),a=setTimeout(c,5),b>=180&&(clearTimeout(a),$(".content-search-input").attr("disabled",!1),$(".content-search-a").attr("id","SearchInfoClickA"))}$(".content").after(Templates.safe),$(".loading").remove(),$(".content-search-a").text("GO >");var a,b=0;c()},btnHome:function(a){var b=this;$(".content").css({"margin-top":"100px"}),$(".header-text-right").children("p").removeClass("header-p-text-active"),$("#btnHome").parent().addClass("header-p-text-active");var c=$("#header .header-p-text").children("b"),d=c.text(),e=c.attr("setHref"),f=c.attr("setId"),g=c.parent();g.children("b").remove(),g.append('<a class="header-p-text-a" id="'+f+'" href="'+e+'">'+d+"</a>");var h=$(".header-p-text-active").children("a").text(),i=$(".header-p-text-active").children("a").attr("href"),j=$(".header-p-text-active").children("a").attr("id");$(".header-p-text-active a").remove(),$(".header-p-text-active").append('<b class="header-p-text-a" setId="'+j+'" setHref="'+i+'">'+h+"</b>"),this.remove(".more-content,.content-bottom,.content,.danger,.safe,.wuzei-content,#fp-nav"),$("body").children("header").css({display:"block"}),$("body").children("footer").css({display:"block"});for(var k=1;k<5;k++)$("body").removeClass("fp-viewing-page"+k);$("body,html").attr("style",""),$("body,html").removeAttr("style"),a.preventDefault(),app.router.navigate("/",!0)},formSearchInfo:function(a){var b=this;a.preventDefault();var c=$("#formSearchInfo input[name=searchInfo]").val();c&&($("#SearchInfoClickA").html('<div class="loading spin"></div>'),$(".content").animate({"margin-top":"10px"},"slow"),$(".content-search-input").attr("disabled",!0),$(".content-search-a").removeAttr("id"),$(".danger,.safe").remove(),$.ajax({type:"POST",url:"/json/searchInfo",dataType:"json",data:{searchInfo:c,judgeDevice:0},success:function(a){a.length<=0?b.safeInfo():(b.appContentDanger(),b.dangerInfo(a))},error:function(){b.safeInfo()}}))}}),router=Backbone.Router.extend({routes:{"/":"home"},views:{},initialize:function(){_.bindAll(this,"home","setBody"),this.views.home=new home({el:$("body")}),this.view=this.views.home,this.view.render(),this.view.appContent()},home:function(){this.setBody(this.views.home,!0),this.views.home.appContent(),$(".content").css({"margin-top":"100px"})},setBody:function(a,b){if(b==1){this.navigate("",!0);return}typeof this.view.body!="undefined"&&this.view.body.unrender(),this.view.body=a}}),app={initialize:function(){var a=Backbone.sync;Backbone.sync=function(b,c,d){d.error=function(a,b,c){a.status==401&&(window.location="/")},a(b,c,d)},this.router=new router,Backbone.history.start({pushState:!0});var b=this;$(window).resize(function(){b.resizeHeader()}),this.resizeHeader()},resizeHeader:function(){setTimeout(function(){var a=$("#app div:first");if(a&&a.offset()){var b=a.offset().left;b>132&&(b=132),b<20&&(b=20),$("#header .wrap").css("margin-left",b+"px"),$("#header .wrap").css("margin-right",b+20+"px")}},1e3)}}